{"diagrams":{"59c088a7-c409-4033-843f-e05732524458":{"diagramWithParameters":{"lifeCycleState":"ACTIVE","versionId":"59c088a7-c409-4033-843f-e05732524458","versionName":"latest","versionType":"LATEST","diagramId":"674ef467-21d3-433b-b15c-d35ed2e55e11","diagramNameEntity":{"id":"62144eac-100b-4a8d-8e95-a5d0b141c6bb","objectId":"674ef467-21d3-433b-b15c-d35ed2e55e11","objectName":"cdcf__contact2kafka_bdp__contact2_web__journal"},"createDt":"2026-01-19 15:41:42.624","changeDt":"2026-01-19 15:41:42.624","lastChangeByUser":"5b173a7d-f1f0-422f-8c38-b19f9097f155","createByUser":"5b173a7d-f1f0-422f-8c38-b19f9097f155","blockFlag":false,"errorResponseFlag":false,"treatTerminalStateAsInitial":false,"metaInfo":{"nodeCounter":2},"saveDiagramMessage":false,"diagramType":"DEFAULT","notificationEmails":[],"inOutParameters":[],"diagramKeyFields":[]},"nodes":[{"nodeVersionId":"968d2cfd-c3d8-4b00-947f-e46241b1bfe8","nodeId":"6f69b4fb-1e3f-4bd7-b7c0-dcd8a789d734","diagramVersion":{"versionId":"59c088a7-c409-4033-843f-e05732524458"},"diagramVersionId":"59c088a7-c409-4033-843f-e05732524458","nodeTypeId":104,"nodeName":"key_value__allocation","jsonProperty":{"nodeType":"104","mapping":[{"expression":"data","alias":"data"},{"expression":"table_name","alias":"table_name"},{"expression":"cast( case  when table_name in  ('public.heartbeat', 'public.resolutions', 'public.user_actions', 'public.alfa_capture_transanctions',  'public.client_reports', 'public.sales_users', 'public.lm_clients', 'public.clients', 'public.inbound_containers')  then\r\n        IF(json_value(data, '$.op') = 'd', json_value(data, '$.before.id'), json_value(data, '$.after.id'))  end as string )","alias":"key_value"},{"expression":"replace(table_name, '.', '__')","alias":"topic_body"},{"expression":"'journal'","alias":"postfix"}],"execution_options":{"logging":true,"start_new_chain":false}},"jsonPropertyHashCode":1883690727,"validState":"VALID","metaInfo":{"position":{"x":717.0104141235352,"y":410.01734924316406}},"isTemplate":false,"displayType":"Трансформация - Простая - Маппинг"},{"nodeVersionId":"df72d0ae-05bc-4f24-8894-6e1fff61c364","nodeId":"a8e3dbdc-d1c9-4e2a-836b-bef77fbbf6fb","diagramVersion":{"versionId":"59c088a7-c409-4033-843f-e05732524458"},"diagramVersionId":"59c088a7-c409-4033-843f-e05732524458","nodeTypeId":135,"nodeName":"cdc__contact__contact2_web","jsonProperty":{"nodeType":"135","execution_options":{"logging":true},"data_provider_uuid":"8876ea2f-b5ad-453f-9b85-03098efe30c8","capture_all_tables":false,"timezone":"Europe/Moscow","include_schema":false,"tables":[{"name":"dbo.appeal","row_key":"0676a8ef-1bba-4260-af45-c46ec6c31737"},{"name":"dbo.appeal_entity","row_key":"e0de8961-d6dc-4295-9379-59970f3b241e"},{"name":"dbo.cf_appeal_0","row_key":"76031ebe-ff4d-4c4b-84eb-d53b6da0b19c"},{"name":"dbo.contact_log","row_key":"97830772-d3d3-4f7d-a064-8ca79dc7a939"},{"name":"dbo.guarantee_contract","row_key":"83c7bf9c-4b23-4eed-9b83-6a03a6b0fdff"},{"name":"dbo.guarantor","row_key":"788261b3-b34e-484c-bf18-3857932ef3d7"},{"name":"dbo.person","row_key":"b4f4e63f-2a6a-46f2-a285-186938a0b865"},{"name":"dbo.cf_property_0","row_key":"15714985-17c5-4aaf-9a3d-a6e5b9d0b7a0"},{"name":"dbo.property","row_key":"cda33b29-d1e8-4ef4-8fe3-b3db97232166"},{"name":"dbo.payment_promise","row_key":"be85a3a2-a24d-442d-87ef-1acae21af483"},{"name":"dbo.debt","row_key":"50f5848e-0f2a-4f1a-9c84-307545c2f4b9"},{"name":"dbo.debt_promise","row_key":"f8ea5bde-3a4d-42b6-bd3b-4de4461ac4ca"},{"name":"dbo.dict_name","row_key":"e25d576b-7977-4993-b37f-e1c394018064"},{"name":"dbo.dict_term","row_key":"5c0ac8dd-a025-4ae1-bbc1-dc99def05e59"},{"name":"dbo.cf_phone_0","row_key":"352eb668-0fef-4fe5-be17-363fb2b0381e"}],"debezium":{"properties":[{"name":"schema.include.list","value":"dbo","row_key":"75f607a9-257b-4c74-b035-f51d23a22f1c"},{"name":"snapshot.mode","value":"no_data","row_key":"7085bf25-cc5b-4a27-94d1-42813bfb5078"}]}},"jsonPropertyHashCode":492059253,"validState":"VALID","metaInfo":{"position":{"x":212.01041412353516,"y":410.01734924316406}},"isTemplate":false,"displayType":"Источник - CDC - MS SQL MultiTable"},{"nodeVersionId":"fffb45d0-5011-4c9a-a4a9-f7c7fc7b203c","nodeId":"ead5379e-8bf3-4aec-ac55-16eacd0fb8db","diagramVersion":{"versionId":"59c088a7-c409-4033-843f-e05732524458"},"diagramVersionId":"59c088a7-c409-4033-843f-e05732524458","nodeTypeId":103,"nodeName":"kafka__contact__contact2_web","jsonProperty":{"nodeType":"103","kafka_connection_uuid":"0ae951b0-95a4-125a-8195-b297b027017f","serde":{"value":{"format":"json"},"key":{"enabled":true,"format":"csv","key_by":["key_value"]}},"kafka":{"producer":{"semantic":"AT_LEAST_ONCE","topic_selection_type":"dynamic","topic_selector":{"prefix":"contact__contact2_web__","delimiter":"__","fields":["topic_body","postfix"]},"properties":[{"name":"transaction.timeout.ms","value":"900000","row_key":"65d469aa-79e5-461c-bd37-78b82893785b"}]}},"execution_options":{}},"jsonPropertyHashCode":2055780749,"validState":"VALID","metaInfo":{"position":{"x":1252.0104141235352,"y":410.01734924316406}},"isTemplate":false,"displayType":"Приёмник - Брокер сообщений - Kafka"}],"links":[{"linkId":"1ead160d-4758-4124-b2db-1c01c7bfa394","diagramVersion":{"versionId":"59c088a7-c409-4033-843f-e05732524458"},"diagramVersionId":"59c088a7-c409-4033-843f-e05732524458","prevNode":{"nodeVersionId":"968d2cfd-c3d8-4b00-947f-e46241b1bfe8"},"prevNodeVersionId":"968d2cfd-c3d8-4b00-947f-e46241b1bfe8","nextNode":{"nodeVersionId":"fffb45d0-5011-4c9a-a4a9-f7c7fc7b203c"},"nextNodeVersionId":"fffb45d0-5011-4c9a-a4a9-f7c7fc7b203c"},{"linkId":"9c655710-0871-48e1-97cc-9a40edfb5b89","diagramVersion":{"versionId":"59c088a7-c409-4033-843f-e05732524458"},"diagramVersionId":"59c088a7-c409-4033-843f-e05732524458","prevNode":{"nodeVersionId":"df72d0ae-05bc-4f24-8894-6e1fff61c364"},"prevNodeVersionId":"df72d0ae-05bc-4f24-8894-6e1fff61c364","nextNode":{"nodeVersionId":"968d2cfd-c3d8-4b00-947f-e46241b1bfe8"},"nextNodeVersionId":"968d2cfd-c3d8-4b00-947f-e46241b1bfe8"}],"variableLinkAssociations":[],"variableNodeAssociations":[],"changeDt":"2026-01-19 15:41:42.624","createDt":"2026-01-19 15:41:42.624"}},"rootIdsAndDescriptions":{"59c088a7-c409-4033-843f-e05732524458":{"59c088a7-c409-4033-843f-e05732524458":"cdcf__contact2kafka_bdp__contact2_web__journal (latest)"}}}